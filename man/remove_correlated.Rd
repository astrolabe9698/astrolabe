% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{remove_correlated}
\alias{remove_correlated}
\title{Remove highly correlated variables with VIF, tracking replacements of always_predictors}
\usage{
remove_correlated(
  df,
  always_predictors = character(0),
  threshold = 5,
  ridge = 1e-08,
  verbose = FALSE
)
}
\arguments{
\item{df}{A dataframe containing numeric predictor variables.}

\item{always_predictors}{Character vector of variables that should ideally never be removed.}

\item{threshold}{VIF threshold above which variables are removed. Default is 5.}

\item{ridge}{Small value added to the diagonal of the correlation matrix to stabilize inversion. Default is 1e-8.}

\item{verbose}{Logical. If TRUE, prints removed variables, representatives, and groups at each iteration. Default is FALSE.}
}
\value{
A list with three elements:
\describe{
\item{df}{The reduced dataframe containing only the selected variables.}
\item{corr_variables}{A list mapping each retained variable to the variables removed in its favor.}
\item{removed_always_predictors}{A character vector of variables that replaced removed always_predictors.}
}
}
\description{
This function iteratively removes variables based on their Variance Inflation Factor (VIF),
while attempting to keep specified predictors (\code{always_predictors}).
If an \code{always_predictor} is removed because it is correlated with another variable,
the variable that replaces it is recorded in \code{removed_always_predictors}.
}

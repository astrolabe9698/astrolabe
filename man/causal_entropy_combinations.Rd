% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fitting_utilities.R
\name{causal_entropy_combinations}
\alias{causal_entropy_combinations}
\title{Causal Entropy Scan over All Predictor→Outcome Combinations}
\usage{
causal_entropy_combinations(
  df,
  ntree = 500,
  mtry_grid = 1:sqrt(ncol(df) - 1),
  verbose = FALSE,
  fixed_outcome = NULL,
  always_predictors = NULL,
  as_factor = NULL
)
}
\arguments{
\item{df}{Data frame containing all variables.}

\item{ntree}{Integer. Trees for Random Forest fitting (default \code{500}).}

\item{mtry_grid}{Integer vector for \code{mtry} search; default \code{1:sqrt(p)}
with \code{p = ncol(df)-1}.}

\item{verbose}{Logical. Print per-combination diagnostics (default \code{FALSE}).}

\item{fixed_outcome}{Optional character scalar. If provided, only this column
is used as outcome; otherwise all columns except \code{always_predictors}
are considered outcomes in turn.}

\item{always_predictors}{Optional character vector of predictors that must
always be available; excluded from the outcome set when scanning.}

\item{as_factor}{Optional character vector of column names to coerce to factor
before fitting (also appended to \code{always_predictors}).}
}
\value{
An invisible list with:
\itemize{
\item \code{entropy}: named numeric vector of \code{H} scores with names
like \code{"X1 + X2 → Y"};
  \item \code{importances}: list of per-relation named lists of RF importances
(one numeric value per predictor).
}
}
\description{
For each candidate outcome in \code{df}, fits a tuned Random Forest to predict
that outcome from the remaining variables, computes residuals, and evaluates a
multivariate entropy \code{entropy_nd} on \code{cbind(predictors, residual)}.
The final score per relation is \code{H = exp(-e_complete)}; larger is better.
}
\details{
For each \code{outcome_col}, predictors are \code{setdiff(colnames(df), outcome_col)}.
A best RF is selected by \code{\link{tune_rf}}. Residuals are computed as
\code{outcome - predict(RF)}. The entropy \code{e_complete} is calculated by
\code{entropy_nd} on the numeric subset of \code{cbind(predictors, residual)} with
\code{normalize = "divide"}. The returned score is \code{H = exp(-e_complete)}.
}
\examples{
\dontrun{
# df must contain only the variables to scan; factors are allowed.
res <- causal_entropy_combinations(df, ntree = 300, verbose = TRUE)
head(res$entropy[order(res$entropy, decreasing = TRUE)])
}

}
\seealso{
\code{\link{tune_rf}}, \code{entropy_nd}
}

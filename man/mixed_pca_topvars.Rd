% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pca_utilities.R
\name{mixed_pca_topvars}
\alias{mixed_pca_topvars}
\title{Mixed PCA and Top-Contributing Variables}
\usage{
mixed_pca_topvars(
  df,
  ncomp = 5,
  top_k = 5,
  var_threshold = 0.9,
  always_predictors = NULL,
  verbose = FALSE
)
}
\arguments{
\item{df}{Data frame containing numeric and/or categorical variables.
Character columns are coerced to factors.}

\item{ncomp}{Integer. Maximum number of components to compute (default \code{5}).}

\item{top_k}{Integer. Number of top contributing variables to keep per component (default \code{5}).}

\item{var_threshold}{Numeric in (0,1]. Target cumulative explained variance (default \code{0.90}).}

\item{always_predictors}{Optional character vector (kept for API symmetry; not used internally).}

\item{verbose}{Logical. If \code{TRUE}, prints progress (default \code{FALSE}).}
}
\value{
A list with:
\itemize{
\item \code{components}: matrix/data frame of individual component scores;
\item \code{top_vars}: data frame with columns \code{component}, \code{variable}, \code{contribution_percent};
\item \code{contributions}: matrix of variable contributions per component;
\item \code{fit}: the fitted \code{PCAmix} object.
}
}
\description{
Runs a mixed PCA (\code{PCAmix}) on numeric + categorical data, selects the
number of components needed to reach a cumulative explained variance threshold,
and extracts the top-\code{top_k} contributing variables for each retained component.
}
\examples{
\dontrun{
library(PCAmixdata)
set.seed(1)
df <- data.frame(
  x1 = rnorm(200),
  x2 = rnorm(200),
  g1 = sample(letters[1:3], 200, TRUE),
  g2 = sample(c("A","B","C","D"), 200, TRUE)
)
res <- mixed_pca_topvars(df, ncomp = 4, top_k = 3, var_threshold = 0.8)
head(res$top_vars)
}

}

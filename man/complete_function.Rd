% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/complete_function.R
\name{complete_function}
\alias{complete_function}
\title{End-to-End Causal Scan (multi-outcome, robust validation, and binary pairs)}
\usage{
complete_function(
  df,
  n_boot = 100,
  n_perm = 50,
  alpha = 0.05,
  ntree = 500,
  seed = NULL,
  n_cores = parallel::detectCores() - 1,
  verbose = TRUE,
  always_predictors = NULL,
  plot = TRUE,
  which = c("all", "robust", "binary"),
  categorical_thr = 35,
  quantitative_thr = 40,
  importance_method = c("fixed", "neg_exp", "net_clust"),
  prob = 0.75
)
}
\arguments{
\item{df}{Data frame with variables to analyze (predictors + outcomes).}

\item{n_boot}{Integer. Number of bootstraps (\code{B}) for robustness/binary stages (default \code{100}).}

\item{n_perm}{Integer. Number of permutations (\code{P}) for robustness/binary stages (default \code{50}).}

\item{alpha}{Numeric in (0,1). Significance level for permutation tests (default \code{0.05}).}

\item{ntree}{Integer. Number of trees for Random Forest fits (default \code{500}).}

\item{seed}{Optional integer random seed.}

\item{n_cores}{Integer. Parallel cores for \code{parallel::mclapply()} (default \code{parallel::detectCores()-1}).}

\item{verbose}{Logical. Print progress messages (default \code{TRUE}).}

\item{always_predictors}{Optional character vector; columns forced to be considered as predictors.}

\item{plot}{Logical. If \code{TRUE}, build a combined causal graph (default \code{TRUE}).}

\item{which}{One of \code{"all"}, \code{"robust"}, \code{"binary"}:
controls which parts of the pipeline are executed.
With 2 columns in \code{df} it coerces to \code{"binary"}.}

\item{categorical_thr}{Numeric. Threshold for categorical variables in \code{evaluate_importance()} (default \code{35}).}

\item{quantitative_thr}{Numeric. Threshold for quantitative variables in \code{evaluate_importance()} (default \code{40}).}

\item{importance_method}{One of \code{"fixed"}, \code{"neg_exp"}, \code{"net_clust"}; strategy for \code{evaluate_importance()}.}

\item{prob}{Numeric. Probability cutoff for the neural network when \code{importance_method="net_clust"} (default \code{0.75}).}
}
\value{
A list with elements:
\itemize{
\item \code{scan_res}: results from \code{scan_all_outcomes_complete()} (or \code{NULL});
\item \code{robust}: results from \code{robust_scan_all_outcomes()} (or \code{NULL});
\item \code{binary}: list of matrices from \code{cor_forest_matrix_robust_perm()} (or \code{NULL});
\item \code{graph}: igraph (or similar) object returned by \code{plot_causal_graph_igraph()} (or \code{NULL});
\item \code{plot}: a recorded plot (from \code{grDevices::recordPlot()}) if \code{plot=TRUE}, else \code{NULL}.
}
}
\description{
Runs the full pipeline on \code{df}: (i) preprocessing of columns (coercion to
factor or numeric with rare-level handling), (ii) multi-outcome scan via
\code{scan_all_outcomes_complete()}, (iii) robust validation with bootstrap +
permutation via \code{robust_scan_all_outcomes()}, and (iv) optional binary
pairwise direction matrix via \code{cor_forest_matrix_robust_perm()}.
Optionally draws a causal graph combining robust multi-outcome and binary evidence.
}
\details{
Columns are preprocessed as follows: low-cardinality numeric are converted to factors;
high-cardinality non-numeric are coerced to numeric when safe (see \code{can_coerce_numeric()}),
otherwise factored with rare-level grouping and dominance checks. Some columns may be
appended to \code{always_predictors} during this stage to stabilize scanning.
}
\examples{
\dontrun{
set.seed(123)
out <- complete_function(
  df, n_boot = 50, n_perm = 200, ntree = 400,
  which = "all", verbose = TRUE
)
out$graph  # combined causal graph object
}

}
\seealso{
\code{\link{scan_all_outcomes_complete}},
\code{\link{robust_scan_all_outcomes}},
\code{\link{cor_forest_matrix_robust_perm}},
\code{\link{can_coerce_numeric}},
\code{\link{plot_causal_graph_igraph}}
}
